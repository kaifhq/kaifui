(function(c,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("kaif")):typeof define=="function"&&define.amd?define(["exports","kaif"],t):(c=typeof globalThis<"u"?globalThis:c||self,t(c.kaifui={},c.Kaif))})(this,function(c,t){"use strict";const g=({getDynamicConfig:e})=>{const{close:n,cancel:r,okay:s,title:i,inputs:a,onsubmit:p,onclose:d}=e(),f=typeof i=="string"?t.h("h2",null,i):typeof i=="function"?i():"",h=typeof r=="string"?t.h("a",{onclick:n},r):typeof r=="function"?r():"",k=typeof s=="string"?t.h("button",null,s):typeof s=="function"?s():"",b=Array.isArray(a)?t.h(t.Fragment,null,a.map(u=>t.h("input",{name:u}))):typeof a=="function"?a():"";return!f&&!b&&!k&&!h?t.h("dialog",{className:"kaifui-dynamic"}):t.h("dialog",{onclick:n,onclose:d,className:"kaifui-dynamic"},t.h("form",{onclick:u=>u.stopPropagation(),onsubmit:p},f,b,t.h("div",{className:"button-group"},[h,k].filter(u=>!!u))))};let m=null,o=null,l=null;const j=()=>l,y=e=>(l=e,m!=null?(m(),o):(o=document.querySelector(".kaifui-dynamic"),o||(o=document.createElement("dialog"),document.body.append(o)),m=t.init(o,g.bind(null,{getDynamicConfig:j})),o)),C={alert(e="Alert"){return new Promise((n,r)=>{e=Object.assign({cancel:"Close",close:()=>{l={},o.close(),n()},onclose:()=>{l={},n()}},typeof e=="string"?{title:e}:e),y(e).showModal()})},confirm(e="Confirm"){return new Promise((n,r)=>{e=Object.assign({cancel:"Close",okay:"OK",close:()=>{l={},o.close(),n(!1)},onsubmit:s=>{s.preventDefault(),n(!0),l={},o.close()},onclose:()=>{l={},n(!1)}},typeof e=="string"?{title:e}:e),y(e).showModal()})},prompt(e="Prompt"){return new Promise((n,r)=>{e=Object.assign({cancel:"Close",okay:"OK",inputs:["val"],close:()=>{l={},o.close(),n("")},onsubmit:s=>{s.preventDefault();const i={};new FormData(s.target).forEach((p,d)=>i[d]=p);const a=Object.keys(i);n(a.length===1?i[a[0]]:i),l={},o.close()},onclose:()=>{l={},n("")}},typeof e=="string"?{title:e}:e),y(e).showModal()})}};c.dynamic=C,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
